华南理工大学
《网络应用开发》课程实验报告

实验题目：设计并实现一个电子商务网站的开发和在线部署

姓名：崔少旭
学号：202330452691
班级：计算机科学与技术2班
提交日期：2025-12-31
代码托管地址：https://github.com/Cui-SX/-
部署在线网站：http://8.148.200.220:8080/e-commerce/

测试账号口令：
管理员（销售）：用户名 sales  密码 sales123
普通顾客：用户名 崔少旭  密码 CSXcsx20050117（或自行注册）


一、实验概述

1. 实验题目
设计并实现一个电子商务网站的开发和在线部署。

2. 实验目标
（1）完成一个面向顾客的在线购物流程，包括商品浏览、购物车、下单支付与订单查询。
（2）完成面向销售或管理员的后台管理功能，包括商品管理、订单管理、销售统计，以及用户行为与系统操作记录的查看。
（3）将项目打包为 WAR，部署到 Linux 服务器的 Tomcat 上并稳定运行。

3. 功能要求
（1）顾客端功能
用户注册、登录、注销
商品列表展示与搜索
商品详情查看
加入购物车、修改数量、删除商品、清空后结算
提交订单与支付，支付成功后发送邮件确认
查看订单列表与订单详情
查看个人浏览历史并支持清空

（2）销售或管理员端功能
商品管理：新增、修改、删除、查看
订单管理：查看订单列表与详情
销售统计：统计总订单数与总销售额，并支持按用户名与时间范围检索订单并计算总额
用户行为：查看用户浏览历史
系统审计：查看系统日志（登录、登出、注册、浏览商品、创建订单、支付订单等）
后台首页：集中展示所有可执行功能入口，点击按钮可直达对应页面


二、实验环境与工具

开发环境：Windows 11，Visual Studio Code
服务器环境：阿里云 ECS（Ubuntu 22.04 LTS，2核2G）
JDK：OpenJDK 8
Web 容器：Apache Tomcat 9.0.98
数据库：MySQL 8.0.35
构建工具：Apache Maven 3.8
版本控制：Git
前端技术：JSP，JSTL，EL 表达式，CSS3


三、系统设计与实现

1. 系统架构设计（MVC）
系统采用 MVC（Model-View-Controller）架构，将页面展示、请求控制与数据访问分离，提升可维护性与扩展性。

（1）View（视图层）
目录：src/main/webapp
使用 JSP 负责页面渲染，结合 JSTL 与 EL 表达式完成数据展示。
公共组件：header.jsp（导航栏），footer.jsp（页脚）。
核心页面包括商品列表、商品详情、购物车、订单列表与详情，以及后台管理相关页面。

（2）Controller（控制层）
目录：src/main/java/com/ecommerce/servlet
各 Servlet 负责接收请求、参数校验、调用 DAO 完成业务处理，并将结果写入 request 或 session，再进行 forward 或 redirect。
典型控制器包括：
AuthServlet：登录、注册、登出
ProductServlet：商品列表、搜索、详情
CartServlet：购物车增删改查
OrderServlet：下单、支付、订单查询
AdminServlet：后台统计、商品与订单管理入口、浏览历史与日志查看入口
BrowsingHistoryServlet：浏览历史展示与清空

（3）Model（模型层）
实体类：User，Product，Order，OrderItem，CartItem 等。
数据访问层：UserDAO，ProductDAO，CartDAO，OrderDAO 等，统一封装 JDBC 操作。
行为记录相关实体与 DAO：BrowsingHistory 与 BrowsingHistoryDAO；SystemLog 与 SystemLogDAO。


2. 数据库设计
数据库名：ecommerce
核心表结构如下：
users：用户表，包含 username、password、email、role 等
products：商品表，包含 name、description、price、stock、image_url 等
orders：订单主表，包含 user_id、total_amount、status 等
order_items：订单明细表，包含 order_id、product_id、quantity、price 等
cart_items：购物车表，包含 user_id、product_id、quantity 等
browsing_history：浏览历史表，按用户与商品维度记录浏览次数与最后浏览时间
system_logs：系统日志表，记录关键操作、IP、User-Agent 与时间

建表与初始化脚本位于 database/schema.sql 与 database/new_features.sql。


3. 关键业务实现说明

（1）登录与权限控制
用户登录成功后将 user、userId、username、role 存入 session。
普通用户跳转商品页面，管理员或销售跳转管理后台。

（2）商品浏览与商品详情
商品列表支持按关键字搜索。
点击商品卡片进入商品详情页，展示图片、描述、库存与价格，并提供加入购物车入口。
在商品详情请求中，系统会记录浏览历史与相关操作日志，便于后续分析与审计。

（3）购物车
加入购物车时若商品已存在于该用户购物车中，则累加数量，否则插入新记录。
购物车页面支持修改数量与删除商品，并计算总金额。

（4）下单与支付
结算时从购物车读取商品项计算总金额，生成订单与订单项。
支付成功后更新订单状态，并发送邮件确认。
同时记录订单创建与支付行为到系统日志。

（5）销售统计
后台报表提供总订单数与总销售额统计。
支持根据用户名与时间范围检索订单，并对检索结果计算总额，便于销售分析。

（6）浏览历史与系统日志
顾客侧可查看自己的浏览历史并清空。
管理员侧可查看用户浏览历史与系统日志，并支持按用户名、动作与时间范围筛选。

（7）管理后台首页
后台首页集中列出后台所有可执行功能（商品管理、订单管理、统计报表、用户浏览历史、系统日志等），并提供按钮直接跳转。


四、功能测试

1. 顾客端
（1）注册登录注销
注册后可使用新账号登录；登录后进入商品列表；登出后回到登录页。

（2）商品浏览
商品列表可正常加载并支持搜索；点击商品进入详情页。

（3）购物车
在商品列表或详情页点击加入购物车后，进入购物车页面可看到对应商品；支持修改数量与删除。

（4）订单与支付
从购物车进入结算，提交订单后生成待支付订单；支付成功后订单状态更新并发送邮件。

（5）订单查询
用户可在订单列表查看历史订单，并进入订单详情查看明细。

（6）浏览历史
浏览商品详情后，浏览历史页可看到记录，重复浏览会更新次数与最后浏览时间；可清空历史记录。

2. 管理端
（1）后台登录
使用 sales 账号登录后进入后台首页。

（2）商品管理
可新增商品、修改商品信息、删除商品并查看商品列表。

（3）订单管理与报表
可查看订单列表与详情。
销售统计页可按条件检索订单并计算总额。

（4）用户行为与系统日志
可查看用户浏览历史。
可查看系统日志，并按条件筛选关键操作记录。


五、应用部署

1. 部署策略
项目打包为 WAR 后部署到 Linux 服务器的 Tomcat，数据库使用 MySQL。为了减少手工配置与出错概率，使用 Shell 脚本进行自动化部署。

2. 部署包准备
本地使用 Maven 构建生成 target/e-commerce.war。
将 e-commerce.war、deploy.sh、database 目录放入 deploy 文件夹并压缩为 deploy.zip 上传至服务器。

3. 服务器端部署步骤
cd ~
unzip -o deploy.zip
cd deploy
chmod +x deploy.sh
sudo ./deploy.sh

如脚本提示无法运行或出现命令找不到的情况，通常是 Windows 换行符导致，可在服务器端执行以下任一命令后再运行脚本：
dos2unix deploy.sh
或
sed -i 's/\r$//' deploy.sh

4. 访问地址
部署完成后访问：http://8.148.200.220:8080/e-commerce/


六、参考资料

1. Java Servlet 相关文档与教程
2. Apache Tomcat 官方文档
3. MySQL 8.0 官方文档
4. Maven 官方文档


七、小结

本实验完成了一个包含顾客端与管理端的电子商务网站。系统在 MVC 分层基础上实现了商品、购物车、订单与支付等核心业务，同时提供了后台管理、统计分析、用户行为记录与系统审计能力。通过自动化部署脚本将应用发布到云服务器，实践了从开发到上线的完整流程。


指导教师评语及成绩

评语：

成绩：                指导教师签名：
批阅日期：
